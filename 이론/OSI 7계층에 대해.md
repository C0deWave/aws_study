# OSI 7계층에 대해서

OSI 모형은 국제 표준화 기구인 ISO에서 컴퓨터 네트워크 프로토콜 디자인과 통신을 계층으로 나누어 설명하기 위해 개발한 모델이다.

![이미지](https://raw.githubusercontent.com/C0deWave/aws_study/8b7a6533b43cfd021fa419a7d2e4c59978e6df74/%EC%9D%B4%EB%AF%B8%EC%A7%80/OSI%207%EA%B3%84%EC%B8%B5.png)

* 각 계층은 독립적이나 상하구조 체계이기 때문에 윗 계층이 동작하기 위해서는 아래 계층이 잘 동작해야 한다.  

---

## 1계층 - Physical Layer (물리 계층)

네트워크를 전기적 신호로 전송한다.

0과 1의 데이터 흐름으로 전송을 담당합니다.

미디어 타입: 구리, 광섬유, 무선, 케이블

전송 단위 : 비트

---

## 2계층 - Data Link Layer (데이터 계층)

데이터 계층은 직접 연결된 이웃 컴퓨터와의 통신만을 다룬다. 컴퓨터를 넘어가는 통신은 데이터 링크 계층에서는 관여하지 않는다.

데이터 계층은 통신에 오류가 없도록 다양한 역할을 수행한다. 이를 위한 다양한 역할이 있다.

* 프레이밍 : 물리계층을 통해 받은 신호를 조합해 Frame 단위의 데이터 유닛으로 만들어서 처리
* 흐름제어 : 데이터를 송 수신시, 너무 많거나 적은 데이터를 송수신하지 않도록 제어
* 오류제어 : 프레임 전송 시 발생한 오류를 복원하거나 재전송
* 접근제어 : 매체 상 통신 주체(장치)가 여러개 존재할 때, 데이터 전송여부 결정
* 동기화 : 프레임 구분자(특별한 Bit 패턴)

장비 : 브리지, 스위치

전송 단위: 프레임

---

## 3계층 - Network Layer (네트워크 계층)

네트워크 계층은 전송할 데이터를 여러개의 경로를 거쳐 목적지에 전송하는 계층이다.

IP 주소를 정하고 패킷을 전달하는 것이 네트워크 계층에서 일어난다. => 이를 라우팅이라 한다.

장비: 라우터, L3스위치

전송 단위: 패킷

---

## 4계층 - Transport Layer (전송 계층)

전송계층에서는 사용자들이 신뢰성있는 데이터를 받을 수 있도록 전송속도를 조절하거나, 오류가 발생하면 맞춰주는 역할을 한다.

TCP, UDP 프로토콜을 사용한다.

* TCP: 신뢰성있는 통신을 보장한다. 연결과 전달을 보장하는 많큼 리소스가 더 들어간다.
* UDP: 빠른 데이터 전송에 초정, 목적지에 잘 도착했는지 신경쓰지 않는다.

장비: L4스위치 => L3와의 차이점은 3계층에서 온 트래킥을 분석해 서비스 종류를 구분할 수 있다.

전송 단위: 세그먼트

---

## 5계층 - Session Layer(세션 계층)

해당 레이어 부터는 상위레이어라고 한다.

세션?

    1. 네트워크 환경에서 사용자 간 또는 컴퓨터 간의 대화를 위한 논리적 연결을 말한다.
    2. 프로세스들 사이에 통신을 수행하기 위해 메세지 교환을 통해 서로를 인식 한 이후부터 통신을 마칠 때까지의 기간

세션계층은 응용 프로그램 간의 통신을 하기위한 세션을 운영체제를 통해 확릭, 유지, 중단하는 작업을 수행한다.

세션 계층에는 동기화라는 기능이 있다. **동기**란 통신 양단에서 서로 동의하는 논리적인 공통처리 지점으로써, 동기점을 설정하기 위해 사용된다.

따라서 동기점이 설정되면 그 이전까지의 통신은 서로 완벽하게 처리했음을 알린다.

이를 통해 송수신중에 오류가 발생하면, 처음부터가 아닌 **동기화 이후부터 다시 재전송**한다.

### 세션 계층 역할 요약
* 사용자 위주의 논리적인 연결 서비스 제공
* 전송모드 설정 (반이중, 전이중, 단방향, 병렬, 직렬, 동기, 비동기)
* 대화와 동기를 위한 데이터 교환 관리
* 토큰 (Token: 특정 서비스 요구 권리)

전송 단위: 데이터

---

## 6계층 - Presentation Layer (표현계층)

표현 계층은 7계층에서 넘겨받은 데이터를 세션계층이 다룰 수 있는 데이터로 바꾸고 반대로 세션에서 올라온 데이터를 7계층이 이해할 수 있는 형태로 바꾸는 작업을 한다.

또한 데이터를 안전하게 사용하기 위한 암호화 / 복호화를 진행한다.

* EBCDIC로 인코딩 된 문서파일을 ASCII로 인코딩된 파일로 바꿔주기, 해당 데이터가 Text인지 그림인지 구별해줌

전송 단위: 데이터

---

## 7계층 - Application Layer (응용계층)

**유저와 가장 가까운 층**으로 응용 프로세스와 직접 관계해 일반적인 응용 서비스(HTTP 프로토콜 등)을 수행한다. 

전송된 메일, 사진, 동영상이 있는 크롬이나 사파리 등의 응용프로그램을 통해 사용자가 눈으로 확인할 수 있는 계층이며 이 데이터 들은 프로토콜(HTTP, FTP, SMTP등)에 의해 처리된다.

전송 단위: 데이터

----

## 데이터 캡슐화 

데이터를 보낼때는 7 => 1 계층으로 이동하는데 이때 필요한 데이터를 Header와 Footer에 추가한 다음 다음 계층으로 전송한다.

이를 **캡슐화** 라고한다.

반대로 데이터를 받을 때는 1 => 7 계층으로 이동하는데 이때는 Header과 Footer을 제거하면서 데이터를 전송한다.

이를 **디 캡슐화** 라고한다.

---

## 흐름도

### 이메일 보내기

* 작성된 메세지는 Application 계층(7계층)에서 Presentation 계층(6계층)으로 전달하게 된다.

* Presentation 계층(6계층)에서는 전달된 메세지를 데이터로 변환 하거나, 암호화 또는 압축을 수행한다. 이렇게 변한된 데이터는 Session 계층(5계층)으로 전달되게 된다.

* Session 계층(5계층)으로 전달된 데이터는 동기화를 위하여 주기적으로 동기점(sync)을 삽입하여 Transport 계층(4계층)으로 데이터를 전달하게 된다.

* Transport 계층(4계층)에서는 발신지와 목적지를 정하고 연결 방식을 연결성, 비연결성 방식으로 설정하여, 흐름 제어와 오류 제어 기능을 한다. 데이터 단위를 Segment 또는 Datagram으로 나눈다. 만약에 악성코드가 있을 경우 방화벽이 작동을 해서 걸러준다.

* Network 계층(3계층)에서 라우팅에 필요한 논리 주소를 설정하고, 패킷에 대한 라우팅 정보를 삽입한다.

* Data Link 계층(2계층)에는 우선 Frame 단위로 데이터를 나눈다. 그리고 MAC 주소로 지정을 하고 속도 차이를 원할히 메꾸기 위해서 흐름 제어를 한다.

* Physical 계층(1계층)에는 전송 매체가 일반 케이블인지 광케이블인지 메체의 길이를 설정한다. 그리고 데이터를 회선으로 보내기 위해 전기적인 변환을 담당한다.
